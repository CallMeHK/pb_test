import{p as s,_ as x,F as m,e as f,h as y,o as e,M as v,a as k}from"./index-a7dac0c4.js";const C=()=>{const[l,r]=s(null),[o,a]=s(null),[c,d]=s(""),n=x(),g=m(()=>({subscription:{event:"*"}}),[]),{todos:i,deleteTodo:T,updateTodo:p}=f(g);console.log(i),y(()=>{var t;d((o==null?void 0:o.text)||""),o!=null&&o.text&&((t=n==null?void 0:n.current)==null||t.focus())},[o==null?void 0:o.text]);const b=m(()=>{const t=i.filter(u=>u.done);return[...i.filter(u=>!u.done),...t]},[i]);return e("section",{id:"preview",children:[b.map(t=>e("article",{onClick:()=>r(h=>h?null:t.id),style:{backgroundColor:"#182530",margin:"calc(var(--block-spacing-vertical)/2) 0",padding:"calc(var(--block-spacing-horizontal)/1.5) calc(var(--block-spacing-horizontal)/1.5)"},children:[t.done&&e("span",{style:{color:"red"},children:"Done!"}),e("p",{children:t.text}),l===t.id&&e("footer",{style:{display:"flex",flexDirection:"row-reverse"},children:[e("button",{onClick:()=>T(t.id),style:{maxWidth:"165px"},children:"Delete"}),e("button",{className:"contrast",onClick:()=>a(t),style:{marginRight:"8px",maxWidth:"165px"},children:"Edit"}),e("button",{onClick:async()=>{await p(t.id,{...t,done:!t.done})},className:"secondary",style:{marginRight:"8px",maxWidth:"165px"},children:t.done?"Undone":"Done"})]})]},t.id)),o&&e(w,{close:()=>a(null),children:[e("p",{children:"Edit your todo"}),e("input",{value:c,onInput:t=>d(t.target.value),ref:n}),e("footer",{children:[e("a",{href:"#cancel",role:"button",className:"secondary","data-target":"modal-example",onClick:t=>{t.preventDefault(),a(null)},children:"Cancel"}),e("a",{href:"#confirm",role:"button","data-target":"modal-example",onClick:async t=>{t.preventDefault(),await p(o.id,{...o,text:c}),a(null)},children:"Update"})]})]})]})},D=()=>{const[l,r]=s(""),o=x(),{createTodo:a}=f(),c=n=>r(n.target.value);return e("section",{id:"form",children:e("form",{onSubmit:async n=>{n.preventDefault(),await a({text:l,done:!1}),console.log(l),r(""),o.current.focus()},autocomplete:"off",children:[e("h3",{children:"Add todos"}),e("label",{for:"text",children:"Todo"}),e("input",{type:"text",id:"text",name:"text",placeholder:"Todo",value:l,onInput:c,ref:o}),e("small",{children:"Press enter to submit your todo"})]})})},w=({children:l,close:r})=>e("dialog",{open:!0,children:e("article",{children:[e("a",{href:"#close","aria-label":"Close",className:"close","data-target":"modal-example",onClick:r}),l]})}),N=()=>e(k,{children:e(v,{children:[e(D,{}),e(C,{})]})});export{N as TodoPage};
