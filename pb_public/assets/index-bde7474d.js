import{l as h,a as x,d as O,h as A,x as I,P as q}from"./preact-bfe5487e.js";import{u as ee,L as M,S as te,R as w,a as oe}from"./wouter-preact-7e50a448.js";import{a as ne,u as p,_ as re,b as C,h as $,T,F as J}from"./@preact/signals-4e3ecbd2.js";import{C as le}from"./pocketbase-05c1a5be.js";import{p as ce}from"./preact-markdown-b1dbf714.js";/* empty css                      */(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerpolicy&&(r.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?r.credentials="include":c.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(c){if(c.ep)return;c.ep=!0;const r=n(c);fetch(c.href,r)}})();const se="modulepreload",ie=function(e){return"/"+e},V={},S=function(t,n,o){if(!n||n.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=ie(r),r in V)return;V[r]=!0;const s=r.endsWith(".css"),i=s?'[rel="stylesheet"]':"";if(!!o)for(let d=c.length-1;d>=0;d--){const f=c[d];if(f.href===r&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${i}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":se,s||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),s)return new Promise((d,f)=>{a.addEventListener("load",d),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};console.log("using backend: ","https://beer.tylergregg.me");const _=new le("https://beer.tylergregg.me");window.pb=_;const E=p({}),y=p(!1),B=p(!1);_.authStore.onChange(()=>{var e,t,n,o,c,r,s,i,u,a,d,f,g,k;if(console.log("running auth onchange..."),y.value!==_.authStore.isValid&&(console.log("setting is_authenticated",_.authStore.isValid),y.value=_.authStore.isValid),!((e=E.value)!=null&&e.id)&&!B.value)try{console.log("running auth refresh"),B.value=!0,_.collection("users").authRefresh()}catch{}((n=(t=_.authStore)==null?void 0:t.baseModel)==null?void 0:n.id)!==((o=E.value)==null?void 0:o.id)&&(console.log("setting user_data to",(r=(c=_.authStore)==null?void 0:c.baseModel)==null?void 0:r.id),E.value=(i=(s=_.authStore)==null?void 0:s.baseModel)!=null&&i.id?{id:(a=(u=_.authStore)==null?void 0:u.baseModel)==null?void 0:a.id,username:(f=(d=_.authStore)==null?void 0:d.baseModel)==null?void 0:f.username,email:(k=(g=_.authStore)==null?void 0:g.baseModel)==null?void 0:k.email}:{})},!0);ne(()=>{console.log("auth data updated",y.value,E.value)});const Ye=async(e,t)=>{try{return await _.collection("users").authWithPassword(e,t),{success:!0}}catch(n){return console.error("failed login",n),{success:!1,error:n}}},ae=()=>_.authStore.clear();p(0);var ue=0;function l(e,t,n,o,c){var r,s,i={};for(s in t)s=="ref"?r=t[s]:i[s]=t[s];var u={type:e,props:i,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--ue,__source:c,__self:o};if(typeof e=="function"&&(r=e.defaultProps))for(s in r)i[s]===void 0&&(i[s]=r[s]);return h.vnode&&h.vnode(u),u}const m=({children:e,onClick:t})=>l("li",{children:l("a",{href:"#",onClick:t,children:e})}),de=()=>{const[e,t]=ee(),n=re(),o=r=>{ae(),r.preventDefault(),n.current.open=!1},c=r=>s=>{s.preventDefault(),t(r),n.current.open=!1};return l("nav",{className:"container-fluid",children:[l("ul",{children:l("li",{children:l("a",{href:"./",className:"contrast",onClick:c("/"),children:[l("img",{src:"./beer-mug-icon.svg",style:{height:"22px",marginRight:"8px",marginBottom:"5px"}}),l("strong",{children:"beer.tylergregg"})]})})}),l("ul",{children:l("li",{children:l("details",{role:"list",dir:"rtl",ref:n,children:[l("summary",{"aria-haspopup":"listbox",role:"link",className:"secondary",children:"Menu"}),l("ul",{role:"listbox",children:[l(m,{onClick:c("/"),children:"Home"}),l(m,{onClick:c("/resume"),children:"Resume"}),l(m,{onClick:c("/beer"),children:"GF Beer"}),l(m,{onClick:c("/tech"),children:"Tech"}),y.value&&l(m,{onClick:c("/todos"),children:"Todos"}),y.value&&l(m,{onClick:c("/chat"),children:"Chat"}),y.value&&l(m,{onClick:o,children:"Sign out"}),!y.value&&l(m,{onClick:c("/signin"),children:"Sign in"})]})]})})})]})},D=({id:e,children:t})=>l("main",{className:"container",...!!e&&{id:e},children:t}),b=p([]),qe=e=>{var s;const t=C(!0),n=C(null);$(()=>{const{subscription:i,skip:u,...a}=e||{sort:"-created"};u||_.collection("todos").getFullList(200,a).then(d=>{t.value=!1,b.value=d}).catch(d=>{t.value=!1,n.value=d})},[e]);const o=T(async i=>{try{const u=await _.collection("todos").create({...i,user:E.value.id});return b.value=[u,...b.value],console.log("successfully created todo"),{success:!0}}catch(u){return console.log("could not create todo: ",u),{success:!1,error:u}}},[]),c=T(async i=>{try{const u=await _.collection("todos").delete(i);return b.value=b.value.filter(a=>a.id!==i),console.log("successfully deleted todo"),{success:!0,data:u}}catch(u){return console.log("could not delete todo: ",u),{success:!1,error:u}}},[]),r=T(async(i,u)=>{try{console.log("updated todo: ",i,{text:u.text,done:u.done,user:u.user});const a=await _.collection("todos").update(i,u);return b.value=b.value.map(d=>d.id===i?a:d),console.log("successfully updated todo"),{success:!0,data:a}}catch(a){return console.log("could not update todo: ",a),{success:!1,error:a}}},[]);return $(()=>{var i,u,a;if((i=e==null?void 0:e.subscription)!=null&&i.event){const d=((u=e==null?void 0:e.subscription)==null?void 0:u.callback)||(f=>{console.log("subscription event recieved: ",f)});return console.log("subscribing to * todos"),_.collection("todos").subscribe((a=e==null?void 0:e.subscription)==null?void 0:a.event,d),()=>{var f;console.log("unsubscribing to * todos"),_.collection("todos").unsubscribe((f=e==null?void 0:e.subscription)==null?void 0:f.event)}}},[(s=e==null?void 0:e.subscription)==null?void 0:s.run,e]),{loading:t.value,todos:b.value,error:n.value,createTodo:o,deleteTodo:c,updateTodo:r}},P=(e,t)=>n=>{var u;const o=J(()=>n||{},[n]),c=t||C([]),r=C(!(o!=null&&o.skipMountFetch)),s=C(null);$(()=>{const{subscription:a,skipMountFetch:d,...f}=o;d||(console.info(` - Fetching ${e} collection...`),r.value=!0,_.collection(e).getFullList(200,{sort:"-created",...f}).then(g=>{r.value=!1,c.value=g,console.info(` - Successfully fetched ${e} collection.`)}).catch(g=>{r.value=!1,s.value=g,console.error(` - Failed to fetch ${e} collection.`)}))},[o]);const i=T(async(a,d={update:!1})=>{try{console.info(` - Creating new ${e}...`);const f=await _.collection(e).create(a);return console.info(` - Successfully created ${e}.`),d.update&&(c.value=[f,...c.value]),{success:!0,data:f}}catch(f){return console.error(` - Failed to create ${e}.`),{success:!1,error:f}}},[]);return $(()=>{var a,d,f;if((a=o==null?void 0:o.subscription)!=null&&a.event){const g=((d=o==null?void 0:o.subscription)==null?void 0:d.callback)||(k=>{console.log(`subscription event ${e} recieved: `,k)});return console.log(`subscribing to * ${e}`),_.collection(e).subscribe((f=o==null?void 0:o.subscription)==null?void 0:f.event,g),()=>{var k;console.log(`unsubscribing to * ${e}`),_.collection(e).unsubscribe((k=o==null?void 0:o.subscription)==null?void 0:k.event)}}},[(u=o==null?void 0:o.subscription)==null?void 0:u.event,o]),{data:c.value,loading:r.value,error:s.value,create:i}},_e="users",fe=p([]),et=P(_e,fe);p([]);const he="pmessage",pe=p([]),tt=P(he,pe),ve="page",ge=p([]),me=P(ve,ge),be="markdown",ye=p([]),ot=P(be,ye),ke=({children:e})=>l("div",{className:"md-section",children:l(ce,{markdown:e})}),we=`
I'm a fullstack developer, gluten free brewer, and dedicated dog dad. I created this little slice of internet as a place to host side projects, experiments, and very important content, like beer recipes. 

Browse the links below at your leisure, inquiries are welcome via [linkedin](https://www.linkedin.com/in/tyler-gregg-803317103/) or email at tyler.gregg.ma@gmail.com.
`,Se=()=>{const e=J(()=>({filter:'title="home"',expand:"markdown"}),[]),{data:t,loading:n,error:o}=me(e);if(console.log(t),n)return null;if(o||!t[0])return l(D,{children:[l("h3",{children:"Sorry, I'm are having trouble with my server!"}),l("h3",{children:"This error has been logged and will be taken care of ASAP!"})]});const[c]=t,r=c.expand.markdown.filter(s=>s.tags.includes("intro"))[0];return l(x,{children:l(D,{children:[l("section",{id:"intro",children:[l("picture",{children:[l("source",{media:"(max-width: 450px)",srcset:"./ty-dogs-banner-450.jpg"}),l("source",{media:"(min-width: 451px) and (max-width: 975px)",srcset:"./ty-dogs-banner-700.jpg"}),l("source",{media:"(min-width: 976px)",srcset:"./ty-dogs-banner-1200.jpg"}),l("img",{style:{padding:"8px 0 24px"},src:"./ty-dogs-banner-1200.jpg",alt:"Ty and his shelties"})]}),l(ke,{children:r.md||we})]}),l("section",{id:"links",className:"md-section",children:[l("p",{children:l(M,{href:"/resume",children:"Resume stuff"})}),l("p",{children:l(M,{href:"/beer",children:"Gluten free beer stuff"})}),l("p",{children:l(M,{href:"/tech",children:"Tech stuff"})})]})]})})};function Le(e,t){for(var n in t)e[n]=t[n];return e}function F(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var o in t)if(o!=="__source"&&e[o]!==t[o])return!0;return!1}function U(e){this.props=e}(U.prototype=new O).isPureReactComponent=!0,U.prototype.shouldComponentUpdate=function(e,t){return F(this.props,e)||F(this.state,t)};var N=h.__b;h.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),N&&N(e)};var Ce=h.__e;h.__e=function(e,t,n,o){if(e.then){for(var c,r=t;r=r.__;)if((c=r.__c)&&c.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),c.__c(e,t)}Ce(e,t,n,o)};var z=h.unmount;function Q(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),e.__c.__H=null),(e=Le({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(o){return Q(o,t,n)})),e}function X(e,t,n){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(o){return X(o,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=n)),e}function v(){this.__u=0,this.t=null,this.__b=null}function Y(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function L(e){var t,n,o;function c(r){if(t||(t=e()).then(function(s){n=s.default||s},function(s){o=s}),o)throw o;if(!n)throw t;return A(n,r)}return c.displayName="Lazy",c.__f=!0,c}function R(){this.u=null,this.o=null}h.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),z&&z(e)},(v.prototype=new O).__c=function(e,t){var n=t.__c,o=this;o.t==null&&(o.t=[]),o.t.push(n);var c=Y(o.__v),r=!1,s=function(){r||(r=!0,n.__R=null,c?c(i):i())};n.__R=s;var i=function(){if(!--o.__u){if(o.state.__a){var a=o.state.__a;o.__v.__k[0]=X(a,a.__c.__P,a.__c.__O)}var d;for(o.setState({__a:o.__b=null});d=o.t.pop();)d.forceUpdate()}},u=t.__h===!0;o.__u++||u||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(s,s)},v.prototype.componentWillUnmount=function(){this.t=[]},v.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=Q(this.__b,n,o.__O=o.__P)}this.__b=null}var c=t.__a&&A(x,null,e.fallback);return c&&(c.__h=null),[A(x,null,t.__a?null:e.children),c]};var W=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(R.prototype=new O).__a=function(e){var t=this,n=Y(t.__v),o=t.o.get(e);return o[0]++,function(c){var r=function(){t.props.revealOrder?(o.push(c),W(t,e,o)):c()};n?n(r):r()}},R.prototype.render=function(e){this.u=null,this.o=new Map;var t=I(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},R.prototype.componentDidUpdate=R.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){W(e,n,t)})};var Ee=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Oe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Re=typeof document<"u",Te=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};O.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(O.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var j=h.event;function xe(){}function $e(){return this.cancelBubble}function Pe(){return this.defaultPrevented}h.event=function(e){return j&&(e=j(e)),e.persist=xe,e.isPropagationStopped=$e,e.isDefaultPrevented=Pe,e.nativeEvent=e};var H={configurable:!0,get:function(){return this.class}},G=h.vnode;h.vnode=function(e){var t=e.type,n=e.props,o=n;if(typeof t=="string"){var c=t.indexOf("-")===-1;for(var r in o={},n){var s=n[r];Re&&r==="children"&&t==="noscript"||r==="value"&&"defaultValue"in n&&s==null||(r==="defaultValue"&&"value"in n&&n.value==null?r="value":r==="download"&&s===!0?s="":/ondoubleclick/i.test(r)?r="ondblclick":/^onchange(textarea|input)/i.test(r+t)&&!Te(n.type)?r="oninput":/^onfocus$/i.test(r)?r="onfocusin":/^onblur$/i.test(r)?r="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(r)?r=r.toLowerCase():c&&Oe.test(r)?r=r.replace(/[A-Z0-9]/g,"-$&").toLowerCase():s===null&&(s=void 0),/^oninput$/i.test(r)&&(r=r.toLowerCase(),o[r]&&(r="oninputCapture")),o[r]=s)}t=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=I(n.children).forEach(function(i){i.props.selected=o.value.indexOf(i.props.value)!=-1})),t=="select"&&o.defaultValue!=null&&(o.value=I(n.children).forEach(function(i){i.props.selected=o.multiple?o.defaultValue.indexOf(i.props.value)!=-1:o.defaultValue==i.props.value})),e.props=o,n.class!=n.className&&(H.enumerable="className"in n,n.className!=null&&(o.class=n.className),Object.defineProperty(o,"className",H))}e.$$typeof=Ee,G&&G(e)};var K=h.__r;h.__r=function(e){K&&K(e),e.__c};const Z=({path:e,component:t})=>l(w,{path:e,component:y.value?t:()=>l(oe,{to:"/signin"})}),Me=L(()=>S(()=>import("./SignInPage-55c7441e.js"),["assets/SignInPage-55c7441e.js","assets/wouter-preact-7e50a448.js","assets/@preact/signals-4e3ecbd2.js","assets/preact-bfe5487e.js","assets/preact-markdown-b1dbf714.js","assets/pocketbase-05c1a5be.js","assets/pico-17913ccb.css"]).then(e=>({default:e.SignInPage}))),Ae=L(()=>S(()=>import("./ChatPage-2d495fac.js"),["assets/ChatPage-2d495fac.js","assets/wouter-preact-7e50a448.js","assets/@preact/signals-4e3ecbd2.js","assets/preact-bfe5487e.js","assets/preact-markdown-b1dbf714.js","assets/pocketbase-05c1a5be.js","assets/pico-17913ccb.css"]).then(e=>({default:e.ChatPage}))),Ie=L(()=>S(()=>import("./TodoPage-d634d097.js"),["assets/TodoPage-d634d097.js","assets/wouter-preact-7e50a448.js","assets/@preact/signals-4e3ecbd2.js","assets/preact-bfe5487e.js","assets/preact-markdown-b1dbf714.js","assets/pocketbase-05c1a5be.js","assets/pico-17913ccb.css"]).then(e=>({default:e.TodoPage}))),Ve=L(()=>S(()=>import("./ResumePage-21163485.js"),["assets/ResumePage-21163485.js","assets/wouter-preact-7e50a448.js","assets/@preact/signals-4e3ecbd2.js","assets/preact-bfe5487e.js","assets/preact-markdown-b1dbf714.js","assets/pocketbase-05c1a5be.js","assets/pico-17913ccb.css"]).then(e=>({default:e.ResumePage}))),Be=L(()=>S(()=>import("./BeerPage-f5650fd4.js"),["assets/BeerPage-f5650fd4.js","assets/wouter-preact-7e50a448.js","assets/@preact/signals-4e3ecbd2.js","assets/preact-bfe5487e.js","assets/preact-markdown-b1dbf714.js","assets/ComingSoon-dfc6b057.js","assets/pocketbase-05c1a5be.js","assets/pico-17913ccb.css"]).then(e=>({default:e.BeerPage}))),De=L(()=>S(()=>import("./TechPage-5363a4e1.js"),["assets/TechPage-5363a4e1.js","assets/wouter-preact-7e50a448.js","assets/@preact/signals-4e3ecbd2.js","assets/preact-bfe5487e.js","assets/preact-markdown-b1dbf714.js","assets/ComingSoon-dfc6b057.js","assets/pocketbase-05c1a5be.js","assets/pico-17913ccb.css"]).then(e=>({default:e.TechPage}))),Fe=()=>l(v,{fallback:null,children:l(Me,{})}),Ue=()=>l(v,{fallback:null,children:l(Ie,{})}),Ne=()=>l(v,{fallback:null,children:l(Ae,{})}),ze=()=>l(v,{fallback:null,children:l(Ve,{})}),We=()=>l(v,{fallback:null,children:l(Be,{})}),je=()=>l(v,{fallback:null,children:l(De,{})}),He=()=>l(x,{children:[l(de,{}),l(te,{children:[l(w,{path:"/signin",component:Fe}),l(Z,{path:"/todos",component:Ue}),l(Z,{path:"/chat",component:Ne}),l(w,{path:"/resume",component:ze}),l(w,{path:"/beer",component:We}),l(w,{path:"/tech",component:je}),l(w,{path:"/",component:Se})]})]});q(l(He,{}),document.querySelector("body"));export{D as M,E as a,et as b,qe as c,ot as d,ke as e,y as i,Ye as l,l as o,pe as p,tt as u};
