import{_ as w,s as d,p as C,h as E,q as $}from"./@preact/signals-4e3ecbd2.js";import{B as b,h as L,i as k,q as P,a as K}from"./preact-bfe5487e.js";function m(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}function q(t,e){const o=e(),[{_instance:n},s]=C({_instance:{_value:o,_getSnapshot:e}});return d(()=>{n._value=o,n._getSnapshot=e,m(n._value,e())||s({_instance:n})},[t,o,e]),E(()=>(m(n._value,n._getSnapshot())||s({_instance:n}),t(()=>{m(n._value,n._getSnapshot())||s({_instance:n})})),[t]),o}const v=t=>{const e=w([t,(...o)=>e[0](...o)]).current;return d(()=>{e[0]=t}),e[1]},A=(t="",e=location.pathname)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",F=(t,e="")=>t[0]==="~"?t.slice(1):e+t,H="popstate",x="pushState",y="replaceState",I="hashchange",R=[H,x,y,I],M=t=>{for(const e of R)addEventListener(e,t);return()=>{for(const e of R)removeEventListener(e,t)}},T=t=>q(M,t),U=()=>location.pathname,j=()=>T(U),z=(t,{replace:e=!1}={})=>history[e?y:x](null,"",t),B=(t={})=>[A(t.base,j()),v((e,o)=>z(F(e,t.base),o))];if(typeof history<"u")for(const t of[x,y]){const e=history[t];history[t]=function(){const o=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),o}}function D(t=Z){let e={};const o=n=>e[n]||(e[n]=t(n));return(n,s)=>{const{regexp:r,keys:a}=o(n||""),u=r.exec(s);return u?[!0,a.reduce((l,f,c)=>(l[f.name]=u[c+1],l),{})]:[!1,null]}}const _=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),O=(t,e,o)=>{let n=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&o&&(n="(?:\\/"+n+")"),n+(e?"?":"")},Z=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let o=null,n=0,s=[],r="";for(;(o=e.exec(t))!==null;){const[a,u,i]=o,l=i==="+"||i==="*",f=i==="?"||i==="*",c=f&&t[o.index-1]==="/"?1:0,S=t.substring(n,o.index-c);s.push({name:u}),n=e.lastIndex,r+=_(S)+O(l,f,c)}return r+=_(t.substring(n)),{keys:s,regexp:new RegExp("^"+r+"(?:\\/)?$","i")}},G={hook:B,matcher:D(),base:""},J=b(G),h=()=>$(J),p=t=>t.hook(t),N=()=>p(h()),Q=t=>{const e=h(),[o]=p(e);return e.matcher(t,o)},X=({path:t,match:e,component:o,children:n})=>{const s=Q(t),[r,a]=e||s;return r?o?L(o,{params:a}):typeof n=="function"?n(a):n:null},Y=(t,e)=>{const o=h(),[,n]=p(o),{to:s,href:r=s,children:a,onClick:u}=t,i=v(c=>{c.ctrlKey||c.metaKey||c.altKey||c.shiftKey||c.button!==0||(u&&u(c),c.defaultPrevented||(c.preventDefault(),n(s||r,t)))}),l={href:r[0]==="~"?r.slice(1):o.base+r,onClick:i,to:null,ref:e},f=k(a)?a:L("a",t);return P(f,l)},g=t=>Array.isArray(t)?[].concat(...t.map(e=>e&&e.type===K?g(e.props.children):g(e))):[t],tt=({children:t,location:e})=>{const o=h(),n=o.matcher,[s]=p(o);for(const r of g(t)){let a=0;if(k(r)&&(a=r.props.path?n(r.props.path,e||s):[!0,{}])[0])return P(r,{match:a})}return null},et=t=>{const{to:e,href:o=e}=t,[,n]=N(),s=v(()=>n(e||o,t));return d(()=>{s()},[]),null};export{Y as L,X as R,tt as S,et as a,N as u};
